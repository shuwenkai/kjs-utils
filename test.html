<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            padding: 0;
            margin: 0;
            color: #fff;
        }

        .inputDiv {
            height: 2000px;
            width: 100%;
            background: linear-gradient(#125, #eae);
        }

        #input1 {
            margin: 30px 0;
            /* height: 100px; */
            line-height: 1.5em;
        }
    </style>
</head>

<body>
    <div class="inputDiv">
        <label for="input1">输入框input1:</label>
        <input type="text" id="input1">
    </div>
    <script src="./call.js"></script>
    <script src="./apply.js"></script>
    <script src="./bind.js"></script>
    <script src="./throttle.js"></script>
    <script src="./decleares.js"></script>
    <script src="./cancat.js"></script>
    <script src="./slice.js"></script>
    <script src="./flatten.js"></script>
    <script src="./chunk.js"></script>
    <script src="./difference.js"></script>
    <script src="./pull.js"></script>
    <script src="./customNew.js"></script>
    <script src="./customInstanceof.js"></script>
    <script src="./clone.js"></script>

    <!-- 测试对象相关方法 -->
    <script>
        console.group('测试对象相关方法');

        // 测试newInstance

        function Person(name, age) {
            this.name = name
            this.age = age
            // return {a: 888}
        }
        let objPerson = customNew(Person, '张三', 18)
        console.log('@测试 customNew 方法结果', objPerson);

        function P1(){
            this.name = 'aaa'
        }
        console.log('@测试 customInstanceof 方法结果', customInstanceof(objPerson, P1), customInstanceof(objPerson, Person));

        // 测试深拷贝1 
        let cloneObj = { a:1, b: 'b', c: { name: 'c' }, f: function(){ return 'f'}, g: [1, 2,3] }
        // cloneObj.d = cloneObj // 循环引用
        let resultClone = deepClone1(cloneObj)

        resultClone.c.name = 'result'
        console.log('@测试 deepClone1 方法结果', cloneObj, resultClone);

        // 测试深拷贝2 
        let cloneObj2 = { a:1, b: 'b', c: { name: 'c' }, f: function(){ return 'f'}, g: [1, 2,3] }
        // cloneObj2.d = cloneObj2 // 循环引用
        let resultClone2 = deepClone2(cloneObj2)

        resultClone2.c.name = 'result2'
        console.log('@测试 deepClone2 方法结果', cloneObj2, resultClone2);

        // 测试深拷贝3 
        let cloneObj3 = { a:1, b: 'b', c: { name: 'c' }, f: function(){ return 'f'}, g: [1, 2,3] }
        cloneObj3.d = cloneObj3 // 循环引用
        let resultClone3 = deepClone3(cloneObj3)

        resultClone3.c.name = 'result3'
        resultClone3.d = 'result3'
        console.log('@测试 deepClone3 方法结果', cloneObj3, resultClone3);

        console.groupEnd()
    </script>
    <!-- 测试数组相关方法 -->
    <script>
        // 测试 map
        console.group('测试数组相关方法');
        let arr = [1, 2, 3, 4, 5]
        let resMap = map(arr, (item, index, array) => {
            return item * 10
        })
        console.log('@测试map结果', resMap);

        // 测试 reduce 
        // 原生数组结果
        console.log('@测试reduce结果(内置)', arr.reduce((res, value) => { return res + value }, 0));
        let resReduce = reduce(arr, (res, value) => { 
            return res + value
         }, 0)
        console.log('@测试reduce结果(自定义)', resReduce);

        // 测试 filter
        let resFilter = filter(arr, (item, index, arr) => { 
            return item % 2 === 0
         }, 0)
        console.log('@测试filter结果(自定义)', resFilter);

        // 测试 find
        let resFind = find(arr, (item, index, arr) => { 
            return item > 3
         }, 0)
        console.log('@测试 find 结果(自定义)', resFind);

        
        // 测试 every
        let resEvery = every(arr, (item, index, arr) => { 
            return item > 0
         }, 0)
        console.log('@测试 every 结果(自定义)', resEvery);
        
        // 测试 some
        let resSome = some(arr, (item, index, arr) => { 
            return item > 0
         }, 0)
        console.log('@测试 some 结果(自定义)', resSome);
        
        // 测试 concat
        let resConcat = concat(arr, [56,88], 900,123)
        console.log('@测试 concat 结果(自定义)', resConcat);

        // 测试 slice
        // let resSlice = slice(arr, -2)
        let resSlice = slice(arr, 3)
        console.log('@测试 slice 结果(自定义)', resSlice);
        
        const arrFlat = [1, 2, [3, 4, [5, 6],7],8,[9]];
        // 测试 flatten
        let resFlatten = flatten(arrFlat)
        console.log('@测试 flatten 扁平化结果(自定义)', resFlatten);
        // 测试 flatten2
        let resFlatten2 = flatten2(arrFlat)
        console.log('@测试 flatten2 扁平化结果(自定义)', resFlatten2);

        // 测试 chunk
        let resChunk = chunk(arr, 2)
        console.log('@测试 chunk 扁平化结果(自定义)', resChunk);

        // 测试 difference
        const arr2 = [1,3,5]
        let resDifference = difference(arr, arr2)
        console.log('@测试 difference 扁平化结果(自定义)', arr, arr2, resDifference);

        // 测试 pull
        const arrPull = [1,3,5,3,5,7,9]
        let resPull = pull(arrPull, 1,3,7)
        console.log('@测试 pull 结果(自定义)', arrPull, resPull);

        // 测试 pullAll
        const arrPullAll = [1,3,5,3,5,7,9]
        let resPullAll = pullAll(arrPullAll, [1,3,7])
        console.log('@测试 pull 结果(自定义)', arrPullAll, resPullAll);


        console.groupEnd();
    </script>
    <!-- 测试节流 -->
    <script>
        console.group('测试节流相关输出');

        let input = document.querySelector("#input1")

        input.addEventListener('keyup', debounce(function (e) {
            console.log(e.keyCode);
        }, 500))

        console.groupEnd()
    </script>
    <!-- 测试防抖 -->
    <script>
        console.group('测试防抖相关输出');

        window.addEventListener('scroll', throttle(function () {
            console.log(Date.now());
        }, 500))
        
        console.groupEnd()
    </script>
    <!-- 测试call, apply, bind -->
    <script>

        console.group('测试call, apply, bind 相关输出');
        function add(a, b) {
            // console.log(this, '@add this');
            return a + b + this.c
        }

        let obj = {
            c: 521
        }

        window.c = 1314
        console.log(call(add, obj, 10, 20));
        console.log(apply(add, null, [30, 40]));

        let fn = bind(add, null, 30, 40)
        console.log(fn(30, 40), '@@');

        // let fn = add.bind(obj, 10, 20)
        // console.log(fn(30, 40),'@@');

        // let fn2 = add.bind(obj)
        // console.log(fn2(2,3));
        console.groupEnd()
    </script>
</body>

</html>